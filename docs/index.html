<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hephaestus Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
        html {
            scroll-behavior: smooth;
            animation: main-fade 1s ease-out forwards;
        }
        * {
            margin: 10px;
            padding: 0;
            box-sizing: border-box;
            font-optical-sizing: auto;
        }
        body {
            position: relative;
            min-height: 100dvh;
        }

        @keyframes main-fade {
            0% { opacity: 0; filter: blur(10px) brightness(0.8); }
            100% { opacity: 1; filter: blur(0) brightness(1); }
        }
    </style>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
</head>
<body>

<header>
    <h1>Hephaestus Documentation</h1>
    <p>Minimal JavaScript DOM builder and template engine</p>
</header>

<main>

    <h2>Introduction</h2>
    <p>
        Hephaestus is a lightweight JavaScript library that makes DOM creation and templating concise, expressive,
        and safe. It provides a fully programmatic API for building DOM nodes and defining reusable component
        templates without dependencies or frameworks.
    </p>

    <ul>
        <li>Builder functions for all major HTML tags — now namespaced under <code>hepha.*</code>.</li>
        <li>A robust template engine with deep-merging override logic.</li>
        <li>Reactive state system for automatic DOM updates.</li>
        <li>Global aliasing system for cross-file element access.</li>
        <li>Optional dev-mode and strict aliasing for safer development.</li>
        <li>Singleton behavior — every file importing Hepha shares the same instance.</li>
    </ul>

    <div class="note">
        <strong>Important:</strong> Hephaestus is a singleton module.
        Importing it in multiple files returns the same instance.
        This means all <b>aliases</b>, <b>templates</b>, and <b>tag builders</b> are shared globally across your project.
    </div>

    <hr>

    <h2>Getting Started</h2>

    <h3>Importing</h3>
    <pre><code>import hepha from "./hepha.js";</code></pre>

    <p>
        Once imported, all tag builders are available as:
    </p>
    <pre><code>hepha.div(), hepha.span(), hepha.button(), hepha.h1(), ...</code></pre>

    <h3>Supported HTML Tags</h3>
    <p>These builders are available through <code>hepha.&lt;tag&gt;</code>:</p>

    <pre>
<code>div, span, p, button, h1-h6, ul, ol, li,
section, article, header, footer, main,
input, textarea, label, form, a, img
</code></pre>

    <hr>

    <h2>Creating Elements</h2>
    <p>Each element is constructed with an <code>options</code> object:</p>

    <pre><code>const btn = hepha.button({
    text: "Click me",
    class: "btn primary",
    alias: "main_btn",
    events: {
        click: () => console.log("Clicked!")
    },
    style: {
        background_color: "red",
        padding: "10px"
    }
}).into("body");
</code></pre>

    <h3>Options Table</h3>
    <p>All other keys in options are treated as attributes of the element</p>

    <table>
        <tr><th>Option</th><th>Type</th><th>Description</th><th>Notes</th></tr>

        <tr><td>text</td><td>string</td><td>Sets <code>textContent</code></td><td></td></tr>
        <tr><td>html</td><td>string</td><td>Sets <code>innerHTML</code></td><td></td></tr>

        <tr><td>children</td><td>array</td><td>Array of child nodes</td>
            <td>Can include Hepha elements or native DOM nodes</td></tr>

        <tr><td>class</td><td>string</td><td>Space-separated class names</td><td></td></tr>

        <tr><td>style</td><td>object</td>
            <td>CSS style as snake_case (auto-converted to kebab-case)</td>
            <td><code>{ background_color: "red" }</code> → <code>background-color</code></td>
        </tr>

        <tr><td>events</td><td>object</td>
            <td>Event listeners (e.g. <code>{ click: fn }</code>)</td>
            <td>Automatically added with <code>addEventListener</code></td>
        </tr>

        <tr><td>alias</td><td>string</td>
            <td>Registers the element globally</td>
            <td>Accessible via <code>hepha.aliases.&lt;name&gt;</code></td>
        </tr>
    </table>

    <h3>Aliases Example</h3>

    <pre><code>
const title = hepha.h1({
    text: "Welcome!",
    alias: "site_title"
}).into("body");

hepha.aliases.site_title.textContent = "Updated!";
</code></pre>

    <hr>

    <h2>Appending Elements with <code>.into()</code></h2>

    <pre><code>
const card = hepha.div({ class: "card" }).into("#app");
</code></pre>

    <p>
        <b>.into()</b> accepts either:
    </p>
    <ul>
        <li>a CSS selector</li>
        <li>a DOM element</li>
    </ul>

    <p>
        If the selector does not match a node, Hepha throws error <code>202</code>.
    </p>

    <hr>

    <h2>Templates</h2>
    <p>Templates define reusable components with deep-merging behavior.</p>

    <h3>Creating a Template</h3>

    <pre><code>
hepha.forge_template("card", "div", {
    class: "card",
    style: { padding: "20px" },
    children: [
        hepha.h2({ text: "Title" }),
        hepha.p({ text: "This is a card." })
    ]
});
</code></pre>

    <h3>Using a Template</h3>

    <pre><code>
const box = hepha.use_template("card", {
    style: { background_color: "black" },
    children: [
        hepha.p({ text: "Extra content!" })
    ]
}).into("body");
</code></pre>

    <h3>How templates treat overrides</h3>

    <pre><code>
base     = { style: { color: "red", padding: "10px" } }
override = { style: { padding: "20px" } }

→ result = { style: { color: "red", padding: "20px" } }
</code></pre>

    <div class="note">
        <strong>Note:</strong> Templates and aliases are global across all imports,
        because Hepha is a shared singleton instance.
    </div>

    <hr>

    <h2>Reactivity</h2>
    <p>
        Hephaestus provides a simple reactivity system inspired by Vue. You can create reactive state and
        link it to element properties like <code>text</code>.
    </p>

    <h3>1. Initialize State</h3>
    <p>
        Use <code>hepha.init()</code> to create a reactive state object.
    </p>
    <pre><code>const state = hepha.init({ count: 0 });</code></pre>

    <h3>2. Create a Reactive Reference</h3>
    <p>
        Use <code>hepha.ref()</code> to wrap a getter function that accesses your reactive state.
        When passed to a Hepha element, the element will automatically update whenever the state changes.
    </p>

    <pre><code>
// Snapshot: value won't update when state.count changes
hepha.h1({ text: state.count }).into("body");

// Reactive: h1 will automatically update when state.count changes
hepha.h1({ text: hepha.ref(() => state.count) }).into("body");

// Triggering an update:
state.count++; 
</code></pre>

    <hr>

    <h2>Dev Mode</h2>
    <pre><code>hepha.use_dev();</code></pre>

    <p>Logs template creation, template usage, element creation, and alias overwrites.</p>

    <hr>

    <h2>Strict Alias Mode</h2>
    <pre><code>hepha.use_strict_alias();</code></pre>

    <p>Prevents alias overwriting (error <code>301</code>).</p>

    <hr>

    <h2>Error Codes</h2>

    <table>
        <tr><th>Code</th><th>Description</th></tr>
        <tr><td>101</td><td>Component isn't a valid Hepha element</td></tr>
        <tr><td>102</td><td>Template does not exist</td></tr>
        <tr><td>201</td><td>Element is no longer in the DOM</td></tr>
        <tr><td>202</td><td>Parent element not found</td></tr>
        <tr><td>301</td><td>Alias overwrite blocked in strict mode</td></tr>
    </table>

    <hr>

    <h2>Best Practices</h2>
    <ul>
        <li>Use aliases only for elements that must be accessed globally.</li>
        <li>Use templates for repetitive UI patterns.</li>
        <li>Use <code>hepha.init()</code> and <code>hepha.ref()</code> for dynamic UI updates.</li>
        <li>Enable <code>dev_mode</code> while developing.</li>
        <li>Remember: all files share the same Hepha instance.</li>
        <li>Use snake_case for styles — Hepha converts it automatically.</li>
    </ul>

</main>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</html>
